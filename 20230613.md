# 6월 13일

## 사진 불러와서 sketchBlur 처리하기
```python
import cv2
import numpy as np
import sys

from PySide2.QtWidgets import *
from PySide2.QtGui import *

class MainWindow(QWidget):
    def __init__(self, parent=None):
        QWidget.__init__(self, parent)

        self.setWindowTitle('display opencv image')

        self.imageLabel = QLabel()
        self.imageLabel.setFrameStyle(QFrame.Panel|QFrame.Sunken)
        self.imageLabel.setSizePolicy(QSizePolicy.Ignored, QSizePolicy.Ignored)
        self.imageLabel.setScaledContents
        self.imageLabel.setPixmap(QPixmap())


        openButton = QPushButton('open', self)
        openButton.clicked.connect(self.open)

        layout = QVBoxLayout()
        layout.addWidget(self.imageLabel)
        layout.addWidget(openButton)

        self.setLayout(layout)
        self.resize(500, 500)

    def open(self):
        fileName, _ = QFileDialog.getOpenFileName(self, '이미지파일열기', '.', 'Iamges(*.png *.jpg *.jpeg)')
        
        # "", '', None
        if not fileName:
            return
        
        self.load(fileName)


    def load(self, fileName):
        # openCV를 통해 이미지를 열어준다.
        img = cv2.imread(fileName)

        # None 자료형은 is 비교하는 것이 가장 안전 (is == 자료형 비교)
        if img is None:
            return

        # 블러
        img = cv2.GaussianBlur(img, ksize=(9,9), sigmaX =0)

        # 연필효과를 주는 함수
        img,_ = cv2.pencilSketch(img, sigma_s=60, sigma_r=0.05, shade_factor=0.015)
        img = cv2.cvtColor(img, cv2.COLOR_GRAY2RGB)

        
        # 색상구조 변환 (BRG -> RGB)
        # img = cv2.cvtColor(img, cv2.COLOR_BGR2RGB)

        h,w,c = img.shape
        # OpenCV Mat과 QImage의 구조적 차이로 3번째 인수에 byyesPerLine 명시가 가능
        qImg = QImage(img.data, w, h, w * c, QImage.Format_RGB888)
        pixmap = QPixmap.fromImage(qImg)
        self.imageLabel.setPixmap(pixmap)
        
        pass


if __name__ == '__main__':

    app = QApplication(sys.argv)

    # 최상위 위젯(윈도우) 생성 및 표시
    mainWindow = MainWindow()
    mainWindow.show()

    app.exec_()
```

> 실행 결과

![Screenshot from 2023-06-13 10-21-59](https://github.com/ajhwan/OpenCV_study/assets/129160008/2c2abf21-dbb5-4ac3-95e2-d3e798d7f085)
